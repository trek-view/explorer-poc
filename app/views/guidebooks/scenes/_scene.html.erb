<div id="scene-<%= scene.id %>" class="col-xl-4 col-lg-4 col-md-6 mb-4 scene-item">
  <div class="card photo-card h-100">
    <% if @user.present? && @guidebook.present? && policy(@guidebook).remove_photo? %>
      <%= link_to user_guidebook_scene_remove_photo_path(@user, @guidebook, scene, photo_id: scene.photo.id),
            class: 'close delete_from_book',
            title: 'delete photo from guidebook',
            data: {confirm: 'Are you sure?'},
            method: :delete,
            remote: true do
      %>
          <span aria-hidden="false" class="delete">&times;</span>
      <% end %>
    <% end %>
    <div class="card-body">
      <% if @user.present? %>
        <%= link_to edit_user_guidebook_scene_path(@user, @guidebook, scene) do %>
          <%= fa_icon('cog', class: 'scene-edit float-right') %>
        <% end %>
      <% end %>

      <h4 class="card-text">
        <%= scene.title %>
      </h4>

      <p class="card-text">
        Description: <%= truncate(scene.description, length: 120, separator: ' ') %>
      </p>
      
      <p class="card-text">Position: <%= scene.position %></p>
      <p class="card-text">Tags: 
        <% if scene.tags.size > 0 %>
          <% scene.tags.each_with_index do |tag, i| %>
            <% color = [:info, :danger, :warning, :success][i % 4] %>
            <div class="tag-container tag-badge-<%=color%>">
              <div class="tag-text">
                <%= tag.name %> 
              </div>
            </div>
          <% end %>
        <% else %>
          <small class="nothing-text">nothing</small>
        <% end %>
      </p>
    </div>
    
    <%= render partial: 'guidebooks/scenes/photo',
        locals: {
          photo: scene.photo,
          photo_link: photo_path(scene.photo)
        }
    %>

    <div class="card-footer">
      <small class="text-muted">
        uploaded by: <%= @guidebook.user.name %>
      </small>
    </div>
  </div>

</div>
