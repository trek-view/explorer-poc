<% content_for :meta_title do %>
  <% @guidebook.name %>
<% end %>

<% content_for :meta_description do %>
  <% @guidebook.description %>
<% end %>

<div class="row">
  <div class="py-5 col-lg-12">
    <div class="card">

      <div class="card-header">
        <div class="row">

          <h1 class="col-lg-10 col-sm-12">
            <%= title "#{@guidebook.name} guidebook" %>
          </h1>
          <% description @guidebook.description %>

          <% if policy(@guidebook).update? %>
            <div class="col-lg-1 col-sm-6">
              <div class="float-right">
                <%= link_to 'Edit',
                  edit_user_guidebook_path(@guidebook.user, @guidebook),
                  class: 'btn btn-warning mt-2'
                %>
              </div>
            </div>
          <% end %>

          <% if policy(@guidebook).destroy? %>
            <div class="col-lg-1 col-sm-6">
              <div class="float-right">
                <%= link_to 'Delete',
                            url_for(action: :destroy, id: @guidebook.id),
                            method: :delete,
                            data: {confirm: 'Are you sure?'},
                            class: 'btn btn-danger mt-2'%>
              </div>
            </div>
          <% end %>

        </div>
      </div>

      <div class="card-body">

        <h3 class="card-title"><%= @guidebook.name %></h3>

        <div class="form-group row">
          <label class="col-sm-2 col-form-label">Description</label>
          <div class="col-sm-10 mt-2">
            <p><%= @guidebook.description %></p>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-2 col-form-label">Category</label>
          <div class="col-sm-10 mt-2">
            <p><%= @guidebook.category.name %></p>
          </div>
        </div>
        <div class="form-group row">
          <label class="col-sm-2 col-form-label">Explorer Guidebook ID</label>
          <div class="col-sm-10 mt-2">
            <p><%= @guidebook.id %></p>
          </div>
        </div>

        <h3 class="card-title">Guidebook sponsors</h3>

          <div class="card text-white bg-dark mb-3">
            <div class="card-header">Your name here</div>
            <div class="card-body">
              <p class="card-text">Is your small business nearby? Are you a local organisation? For a small donation you can be listed as a sponsor of this guidebook whilst supporting our work to protect the natural world. <a href="https://www.trekview.org/contact/" target="_blank">Contact us for more information</a>.</p>
            </div>
          </div>

        <h4>Added Scenes</h4>
        <% if @scenes.any? %>
          <div class="sort-wrapper">
            <%= render(
                  SortComponent, collection_name: :scenes,
                  value: @sort.try(:[], :scenes)
                )
            %>
          </div>
          <div class="row">
            <%= render partial: 'scenes/scene', collection: @scenes %>
          </div>
        <% else %>
          <p class="card-text">Nothing</p>
        <% end %>
      </div>
    </div>
  </div>
</div>

<div class="form-group">
  <%= link_to 'Back', user_path(current_user, tab: 'guidebooks'), class: 'btn btn-success'%>
</div>